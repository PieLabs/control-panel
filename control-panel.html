<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-menu/paper-menu.html">
<link rel="import" href="../paper-radio-group/paper-radio-group.html">
<link rel="import" href="../paper-radio-button/paper-radio-button.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-toggle-button/paper-toggle-button.html">
<dom-module id="label-wrapper">

  <style>
    :host {
      padding-top: 8px;
      margin-top: 8px;
    }

    .root {
      position: relative;
    }

    .label {
      font-size: 17px;
      line-height: 17px;
      color: #888888;
      display: block;
      margin: 0;
      padding: 0;
      position: absolute;
      transform: translateY(-40%) scale(0.75);
    }

    :host {
      float:left;
    }
  </style>
  <template>
    <div class="root">
    <label class="label">{{label}}</label>
    <content></content>
    </div>
  </template>
  <script>
    Polymer({
      is: 'label-wrapper',
      properties: {
        label: {
          type: String
        }
      }
    });

  </script>

</dom-module>

<dom-module id="pie-control-panel">
  <style>

    :host {
      /*--paper-radio-group-item-padding: 0px 0px 0px 10px;*/
      display: block;
    }

    .hide-show-session {
      display: inline-block;
    }

    paper-toggle-button {
      margin-left: 50px;
    }

  </style>

  <template>

  <!--<paper-input-container attr-for-value="">-->

    <label-wrapper label="Mode">
      <paper-radio-group aria-labelledby="modeLabel" selected="{{env.mode}}">
        <paper-radio-button name="gather">gather</paper-radio-button>
        <paper-radio-button name="view">view</paper-radio-button>
        <paper-radio-button name="evaluate">evaluate</paper-radio-button>
      </paper-radio-group>
    </label-wrapper>
  <!--</paper-input-container>-->


    <paper-dropdown-menu label="Locale" noink no-animations>
      <paper-menu attr-for-selected="value" class="dropdown-content" selected="{{env.locale}}">
        <paper-item value="en_US">English (US)</paper-item>
        <paper-item value="es_ES">Spanish</paper-item>
      </paper-menu>
    </paper-dropdown-menu>
    
    <paper-dropdown-menu label="Color" noink no-animations>
      <paper-menu attr-for-selected="value" class="dropdown-content" selected="{{env.accessibility.colorContrast}}">
        <paper-item value="black_on_white">Black on White</paper-item>
        <paper-item value="black_on_rose">Black on Rose</paper-item>
        <paper-item value="white_on_black">White on Black</paper-item>
      </paper-menu>
    </paper-dropdown-menu>

    <paper-toggle-button class="hide-show-session" checked="{{showSession}}">{{sessionLabel}}</paper-toggle-button>

    <content></content>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'pie-control-panel',
    properties: {
      showSession: {
        type: Boolean,
        observer: 'hideShowSession'
      },
      env: {
        type: Object,
        value: {
          mode: 'gather',
          role: 'student',
          locale: 'en_US',
          accessibility: {}
        },
        observer: 'envChanged'
      }
    },
    observers: [
      'hideShowSession(showSession)',
      'envChanged(env.*)'
    ],
    hideShowSession: function(newValue, oldValue) {
      this.sessionLabel = this.showSession ? 'hide session' : 'show Session';
      this.fire('pie.showSession', this.showSession);
    },
    envChanged: function(newValue, oldValue) {
      if (newValue && !newValue.accessiblity) {
        newValue.accessibility = {};
      }

      this.fire('pie.envChanged', this.env);
    }
  });
</script>